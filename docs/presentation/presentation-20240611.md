# 系统能力大赛论文组会

## 操作系统文献阅读

### Managarm: A Fully Asynchronous Operating System

- [论文地址](https://dl.gi.de/items/2d49cb3b-9574-476c-a259-081071dd2f62)

- 2024年发表，来自德国```Society for Informatics```期刊。

- 主体内容：一个基于微内核的操作系统体系，系统管理与驱动等基础设施放在用户态，为降低上下文切换的开销，对调用门中断处理采用异步模式，同时也实现了异步进程通讯，提升系统的并发性，并同时维持对POSIX标准的支持。

- SOTA技术方案实现：
1. [seL4](http://web4.ensiie.fr/~dubois/PR_2010/Klein_EHACDEEKNSTW_10.pdf)，于2009年发表至ACM顶会。
2. [NOVA](http://hypervisor.org/eurosys2010.pdf)，于2010年发表至ACM顶会。

- 论文的主要工作：
1. 系统调用采用多轮并发队列的方式，不使用重锁而是通过Futex来保证操作同步。
2. 进程间通讯采用基于消息传递的异步通讯机制，通过消息队列+共享内存来实现，并为保障安全性，引入了消息认证机制。
    - 传统的进程双向通讯采用流式消息传递，两者并无发送方与接收方的区分，而是针对每次通讯的Session，通过几轮交流（类似TCP握手）从而达成处理方与发送方的区分。为了握手，双方会发送ACTION信号，这样的信号会连同其他正常通讯请求一起排进操作队列，而数据请求也会放在其中，而拷贝过程却会不停上升到内核态，从而提高了陷入（TRAP）次数，降低了系统的并发性和性能。
    - 此论文提出了共享+握手的异步通讯方案，由一方掌管其数据空间的生命周期，另一方只需发送握手请求，握手完成后，双方就可以开始异步通讯，而不需要等待对方的响应。IPC消息队列里只会留下简单的ACTION描述符与句柄，而不会直接对数据本体进行硬拷贝。同时，异步性降低了其在通讯时的开销，使得通讯开展前后几乎无缝衔接。
3. 进程间通讯句柄采用引用计数的方式来管理，避免了句柄泄露的问题。
    - 传统的进程间通讯机制，比如管道、套接字等，都是基于文件描述符的，而文件描述符的生命周期与进程一致，当进程退出时，文件描述符也随之消失，导致句柄泄露。
    - 论文提出了引用计数机制，为每个IPC句柄维护一个引用计数，当引用计数为0时，句柄会被释放，避免了句柄泄露。
4. 内存管理实现了异步写时复制和页缓存机制。
    - 传统的内存管理机制，比如页表、页分配、回收等，都是同步的，当进程访问内存时，必须等待内存回收完成，从而降低了系统的并发性。
    - 论文提出了异步写时复制机制，当进程修改页缓存时，只会将页标记为脏，并将修改的内容复制到新的页中，而不会影响原有的页，从而提高了系统的并发性。同时，通过页缓存机制，可以避免频繁的页分配和回收，从而提高了系统的性能。
5. 系统管理与驱动等基础设施放在用户态，降低了系统的上下文切换开销。
    - 传统的操作系统，比如Linux，系统管理与驱动等基础设施都放在内核态，导致系统调用的延迟，降低了系统的并发性。
    - 论文提出了Managarm，将系统管理与驱动等基础设施放在用户态，并采用异步模式处理调用门中断，降低了系统的上下文切换开销，提升了系统的并发性。
    
- 设计参考：Fuchsia、Minix

- 论文的优点：

1. 异步通讯机制：异步通讯机制可以降低系统的并发性，提升系统的性能。
2. 引用计数机制：引用计数机制可以避免句柄泄露的问题。
3. 异步写时复制机制：异步写时复制机制可以提升系统的并发性。
4. 系统管理与驱动等基础设施放在用户态：系统管理与驱动等基础设施放在用户态，降低了系统的上下文切换开销。

- 论文的局限性：

1. 系统调用的延迟：系统调用的延迟会影响系统的并发性。
2. 系统调用的复杂度：系统调用的复杂度会影响系统的性能。
3. 系统调用的可靠性：系统调用的可靠性会影响系统的稳定性。

### DREAM: A Dynamic Scheduler for Dynamic Real-time Multi-model ML Workloads

- [论文地址](https://arxiv.org/pdf/2212.03414v2)

- 2024年发表，来自ACM知名顶会```Architectural Support for Programming Languages and Operating Systems```。

- 主体内容：DREAM是一个动态调度器，用于针对动态实时的高负载与计算密集型任务进行优化（例如多模型机器学习）。

- SOTA技术方案实现：
1. [LLREF](https://www.ssrg.ece.vt.edu/papers/rtss06.pdf)

